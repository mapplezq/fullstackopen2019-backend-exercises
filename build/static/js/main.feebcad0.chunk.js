(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{15:function(e,n,t){e.exports=t(38)},37:function(e,n,t){},38:function(e,n,t){"use strict";t.r(n);var a=t(0),o=t.n(a),c=t(13),u=t.n(c),l=t(14),r=t(2),i=function(e){return o.a.createElement("div",null,"filter shown with: ",o.a.createElement("input",{value:e.searchKey,onChange:e.handleSearchInput}))},m=function(e){return o.a.createElement("form",null,o.a.createElement("div",null,"name: ",o.a.createElement("input",{value:e.newName,onChange:e.handleNewNameInput})),o.a.createElement("div",null,"number: ",o.a.createElement("input",{value:e.newNumber,onChange:e.handleNewNumberInput})),o.a.createElement("div",null,o.a.createElement("button",{type:"submit",onClick:e.addNewPerson},"add")))},s=function(e){return o.a.createElement("div",null,e.numbersToShow.map((function(n){return o.a.createElement("p",{key:n.id},n.name," ",n.number,o.a.createElement("button",{onClick:e.deleteBtnClick.bind(void 0,n.id)},"delete"))})))},d=t(3),f=t.n(d),b="/api/persons",h=function(){return f.a.get(b).then((function(e){return e.data}))},p=function(e){return f.a.post(b,e).then((function(e){return e.data}))},g=function(e,n){return f.a.put("".concat(b,"/").concat(e),n).then((function(e){return e.data}))},v=function(e){return f.a.delete("".concat(b,"/").concat(e)).then((function(e){return e.data}))},w=(t(37),function(e){var n=e.message,t=e.level;return null===n?null:o.a.createElement("div",{className:0===t?"error":"warning"},n)}),E=function(){var e=Object(a.useState)([]),n=Object(r.a)(e,2),t=n[0],c=n[1],u=Object(a.useState)(""),d=Object(r.a)(u,2),f=d[0],b=d[1],E=Object(a.useState)(""),O=Object(r.a)(E,2),j=O[0],N=O[1],k=Object(a.useState)(""),S=Object(r.a)(k,2),C=S[0],y=S[1],I=Object(a.useState)([]),T=Object(r.a)(I,2),x=T[0],P=T[1],B=Object(a.useState)(!1),D=Object(r.a)(B,2),A=D[0],J=D[1],K=Object(a.useState)(null),L=Object(r.a)(K,2),U=L[0],q=L[1],z=A?x:t;Object(a.useEffect)((function(){h().then((function(e){console.log(e),c(e)}))}),[]);return o.a.createElement("div",null,o.a.createElement("h2",null,"Phonebook"),o.a.createElement(w,{message:U}),o.a.createElement(i,{searchKey:C,handleSearchInput:function(e){if(console.log(e.target.value),y(e.target.value),e.target.value.length>0){J(!0);var n=t.filter((function(n){var t=n.name.toLowerCase(),a=e.target.value.toLowerCase();return t.includes(a)}));P(n)}else J(!1),P([])}}),o.a.createElement("h3",null,"Add a new"),o.a.createElement(m,{newName:f,handleNewNameInput:function(e){console.log(e.target.value),b(e.target.value)},newNumber:j,handleNewNumberInput:function(e){console.log(e.target.value),N(e.target.value)},addNewPerson:function(e){e.preventDefault(),J(!1),y("");var n=t.find((function(e){return e.name===f}));0===f.length?window.alert("name cannot be empty."):0===j.length?window.alert("number cannot be empty."):void 0!==n?window.confirm("".concat(j," is already added to phonebook, replace the old number with a new one?"))&&(b(""),N(""),g(n.id,Object(l.a)({},n,{number:j})).then((function(e){console.log("update returnedPerson",e),c(t.map((function(t){return t.id!==n.id?t:e}))),q("Update ".concat(n.name," phone success")),setTimeout((function(){q(null)}),5e3)})).catch((function(e){q("Infomation of ".concat(n.name," has already been removed from server"),1),setTimeout((function(){q(null)}),5e3),c(t.filter((function(e){return e.id!==n.id})))}))):p({name:f,number:j}).then((function(e){console.log(e),c(t.concat(e)),q("Add ".concat(f," success"),0),setTimeout((function(){q(null)}),5e3),b(""),N("")}))}}),o.a.createElement("h3",null,"Numbers"),o.a.createElement(s,{numbersToShow:z,deleteBtnClick:function(e,n){console.log(n),console.log("id is",e),window.confirm("Delete cxxx")?(console.log("Ok button clicked"),v(e).then((function(n){console.log("retun ",n),c(t.filter((function(n){return n.id!==e}))),q("Delete success",0),setTimeout((function(){q(null)}),5e3)}))):console.log("Cancel button clicked")}}))};u.a.render(o.a.createElement(E,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.feebcad0.chunk.js.map
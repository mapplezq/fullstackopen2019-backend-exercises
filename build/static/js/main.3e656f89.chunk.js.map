{"version":3,"sources":["components/Filter.js","components/PersonForm.js","components/Persons.js","services/persons.js","App.js","index.js"],"names":["Filter","props","value","searchKey","onChange","handleSearchInput","PersonForm","newName","handleNewNameInput","newNumber","handleNewNumberInput","type","onClick","addNewPerson","Persons","numbersToShow","map","person","key","id","name","number","deleteBtnClick","bind","baseUrl","axios","get","then","response","data","newObject","post","put","delete","Notification","message","level","className","App","useState","persons","setPersons","setNewName","setNewNumber","setSearchKey","searchResult","setSearchResult","isSearch","setIsSearch","errorMessage","setErrorMessage","useEffect","personService","originPersons","console","log","event","target","length","filter","o","toLowerCase","s","includes","preventDefault","find","window","alert","undefined","confirm","returnedPerson","setTimeout","catch","error","concat","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.3e656f89.chunk.js","sourcesContent":["import React from 'react';\n\nconst Filter = (props) => {\n\n    return (\n        <div>\n            filter shown with: <input value={props.searchKey} \n            onChange={props.handleSearchInput}/>\n        </div>\n    );\n};\n\nexport default Filter;","import React from 'react';\n\nconst PersonForm = (props) => {\n\n    return (\n        <form>\n            <div>\n                name: <input value={props.newName} onChange={props.handleNewNameInput}/>\n            </div>\n            <div>\n                number: <input value={props.newNumber} onChange={props.handleNewNumberInput}/>\n            </div>\n            <div>\n                <button type=\"submit\" onClick={props.addNewPerson}>add</button>\n            </div>\n        </form>\n    );\n};\n\nexport default PersonForm;","import React from 'react';\n\nconst Persons = (props) => {\n    \n    return (\n        <div>\n            {props.numbersToShow.map(person => \n                <p key={person.id}>\n                    {person.name} {person.number}\n                    <button onClick={props.deleteBtnClick.bind(this, person.id)}>delete</button>\n                </p>\n            )}\n        </div>\n    );\n};\n\nexport default Persons;","import axios from 'axios'\n\nconst baseUrl = '/api/persons'\n\nconst getAll = () => {\n    const request = axios.get(baseUrl)\n    return request.then(response => response.data)\n}\n\nconst create = (newObject) => {\n    const request = axios.post(baseUrl, newObject)\n    return request.then(response => response.data)\n}\n\nconst deletePerson = (id) => {\n    const request = axios.delete(`${baseUrl}/${id}`)\n    return request.then(response => response.data)\n}\n\nconst update = (id, newObject) => {\n    const request = axios.put(`${baseUrl}/${id}`, newObject)\n    return request.then(response => response.data)\n}\n\nexport default { getAll, create, update, deletePerson }","import React, { useState, useEffect } from 'react'\nimport Filter from './components/Filter'\nimport PersonForm from './components/PersonForm'\nimport Persons from './components/Persons'\nimport personService from './services/persons'\nimport './index.css'\nconst Notification = ({message, level}) => {\n  if (message === null) {\n    return null\n  }\n\n  return (\n    <div className={level===0?'error':'warning'}>\n      {message}\n    </div>\n  )\n}\n\nconst App = () => {\n  const [persons, setPersons] = useState([])\n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [ searchKey, setSearchKey ] = useState('')\n  const [ searchResult, setSearchResult ] = useState([])\n  const [ isSearch, setIsSearch ] = useState(false)\n  const [ errorMessage, setErrorMessage ] = useState(null)\n  const numbersToShow = isSearch ? searchResult : persons\n\n  useEffect(() => {\n    personService\n      .getAll()\n      .then(originPersons => {\n        console.log(originPersons);\n        setPersons(originPersons)\n      })\n  }, [])\n\n  const handleNewNameInput = (event) => {\n    console.log(event.target.value);\n    setNewName(event.target.value)\n  }\n\n  const handleNewNumberInput = (event) => {\n    console.log(event.target.value);\n    setNewNumber(event.target.value)\n  }\n\n  const addNewPerson = (event) => {\n    // debugger\n    event.preventDefault()\n    // clear search status\n    setIsSearch(false)\n    setSearchKey('')\n    const find = persons.find(({name}) => name === newName)\n    if (newName.length === 0) {\n      window.alert(`name cannot be empty.`)\n    } else if (newNumber.length === 0) {\n      window.alert(`number cannot be empty.`)\n    } else if (find !== undefined ) {\n      if (window.confirm(`${newNumber} is already added to phonebook, replace the old number with a new one?`)) {\n        setNewName('')\n        setNewNumber('')\n        personService\n          .update(find.id, { ...find, number: newNumber})\n          .then(returnedPerson => {\n            console.log('update returnedPerson', returnedPerson);\n            setPersons(persons.map(person => person.id !== find.id ? person : returnedPerson))\n            setErrorMessage(\n              `Update ${find.name} phone success`\n            )\n            setTimeout(() => {\n              setErrorMessage(null)\n            }, 5000)\n          })\n          .catch(error => {\n            setErrorMessage(\n              `Infomation of ${find.name} has already been removed from server`\n            , 1)\n            setTimeout(() => {\n              setErrorMessage(null)\n            }, 5000)\n            setPersons(persons.filter(person => person.id !== find.id))\n          })\n      }\n    } else {\n      personService\n        .create({name: newName, number: newNumber})\n        .then(returnedPerson => {\n          console.log(returnedPerson)\n          setPersons(persons.concat(returnedPerson))\n          setErrorMessage(\n            `Add ${newName} success`, 0)\n          setTimeout(() => {\n            setErrorMessage(null)\n          }, 5000)\n          setNewName('')\n          setNewNumber('')\n        })\n        .catch(error => {\n          console.log('create error:', error.response.data);\n          setErrorMessage(error.response.data.error)\n          setTimeout(() => {\n            setErrorMessage(null)\n          }, 5000)\n        })\n    }\n  }\n\n  const handleSearchInput = (event) => {\n    console.log(event.target.value);\n    setSearchKey(event.target.value)\n    \n    // debugger\n    if (event.target.value.length > 0 ) {\n      setIsSearch(true)\n      const searchResult = persons.filter(person => {\n        const o = person.name.toLowerCase()\n        const s = event.target.value.toLowerCase()\n        const r = o.includes(s)\n        return r\n      })\n  \n      setSearchResult(searchResult)\n    } else {\n      setIsSearch(false)\n      setSearchResult([])\n    }\n  }\n\n  const deleteBtnClick = (id, event) => {\n    console.log(event)\n    console.log('id is', id)\n    if (window.confirm(`Delete cxxx`)) {\n        console.log('Ok button clicked');\n        personService\n            .deletePerson(id)\n            .then(returnedPerson => {\n                console.log('retun ', returnedPerson);\n                setPersons(persons.filter(person => person.id !== id))\n                setErrorMessage(\n                  `Delete success`, 0\n                )\n                setTimeout(() => {\n                  setErrorMessage(null)\n                }, 5000)\n            })\n    } else {\n        console.log('Cancel button clicked');\n    }\n}\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={errorMessage}/>\n      <Filter searchKey={searchKey} handleSearchInput={handleSearchInput}/>\n      <h3>Add a new</h3>\n      <PersonForm newName={newName} handleNewNameInput={handleNewNameInput}\n      newNumber={newNumber} handleNewNumberInput={handleNewNumberInput}\n      addNewPerson={addNewPerson}/>\n      <h3>Numbers</h3>\n      <Persons numbersToShow={numbersToShow} deleteBtnClick={deleteBtnClick}/>\n    </div>\n  )\n}\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\n// import './index.css';\nimport App from './App';\n// import * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n// serviceWorker.unregister();\n"],"sourceRoot":""}